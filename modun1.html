<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Gi·ªè h√†ng ƒë∆°n gi·∫£n</title>
    <style>
      body {
        font-family: Arial;
        padding: 20px;
      }
      h2 {
        color: darkblue;
      }
      input,
      button {
        margin: 5px;
        padding: 5px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }
      th,
      td {
        border: 1px solid gray;
        padding: 8px;
        text-align: center;
      }
      th {
        background: #f2f2f2;
      }
      .btn {
        cursor: pointer;
        padding: 5px 10px;
        border-radius: 5px;
      }
      .edit {
        background: orange;
        color: white;
      }
      .delete {
        background: red;
        color: white;
      }
    </style>
  </head>
  <body>
    <h2>üõí Gi·ªè h√†ng ƒë∆°n gi·∫£n</h2>

    <!-- Form nh·∫≠p s·∫£n ph·∫©m -->
    <input type="text" id="name" placeholder="T√™n s·∫£n ph·∫©m" />
    <input type="number" id="price" placeholder="Gi√°" />
    <input type="number" id="quantity" placeholder="S·ªë l∆∞·ª£ng" />
    <button onclick="cart.addItem()">Th√™m s·∫£n ph·∫©m</button>

    <!-- B·∫£ng hi·ªÉn th·ªã -->
    <table>
      <thead>
        <tr>
          <th>T√™n</th>
          <th>Gi√°</th>
          <th>S·ªë l∆∞·ª£ng</th>
          <th>T·ªïng</th>
          <th>H√†nh ƒë·ªông</th>
        </tr>
      </thead>
      <tbody id="cart-body"></tbody>
    </table>

    <h3>T·ªïng c·ªông: <span id="total">0</span> ƒë</h3>

    <script>
      // ƒê·ªãnh nghƒ©a l·ªõp S·∫£n ph·∫©m
      class Product {
        constructor(name, price, quantity) {
          this.name = name;
          this.price = price;
          this.quantity = quantity;
        }
        getTotal() {
          return this.price * this.quantity;
        }
      }

      // ƒê·ªãnh nghƒ©a l·ªõp Gi·ªè h√†ng
      class Cart {
        constructor() {
          this.items = []; // m·∫£ng ch·ª©a c√°c s·∫£n ph·∫©m
        }

        // Th√™m s·∫£n ph·∫©m m·ªõi
        addItem() {
          const name = document.getElementById("name").value;
          const price = parseInt(document.getElementById("price").value);
          const quantity = parseInt(document.getElementById("quantity").value);

          if (!name || !price || !quantity) {
            alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß!");
            return;
          }

          this.items.push(new Product(name, price, quantity));
          this.render();
          this.clearForm();
        }

        // X√≥a s·∫£n ph·∫©m
        deleteItem(index) {
          this.items.splice(index, 1);
          this.render();
        }

        // S·ª≠a s·∫£n ph·∫©m (cho nh·∫≠p l·∫°i s·ªë l∆∞·ª£ng)
        editItem(index) {
          let newQuantity = prompt(
            "Nh·∫≠p s·ªë l∆∞·ª£ng m·ªõi:",
            this.items[index].quantity
          );
          if (newQuantity !== null) {
            this.items[index].quantity = parseInt(newQuantity);
            this.render();
          }
        }

        // Hi·ªÉn th·ªã gi·ªè h√†ng ra b·∫£ng
        render() {
          const tbody = document.getElementById("cart-body");
          tbody.innerHTML = "";
          let total = 0;

          this.items.forEach((item, index) => {
            total += item.getTotal();
            tbody.innerHTML += `
            <tr>
              <td>${item.name}</td>
              <td>${item.price}</td>
              <td>${item.quantity}</td>
              <td>${item.getTotal()}</td>
              <td>
                <button class="btn edit" onclick="cart.editItem(${index})">S·ª≠a</button>
                <button class="btn delete" onclick="cart.deleteItem(${index})">X√≥a</button>
              </td>
            </tr>
          `;
          });

          document.getElementById("total").innerText = total;
        }

        // X√≥a form nh·∫≠p sau khi th√™m
        clearForm() {
          document.getElementById("name").value = "";
          document.getElementById("price").value = "";
          document.getElementById("quantity").value = "";
        }
      }

      // T·∫°o gi·ªè h√†ng
      const cart = new Cart();
    </script>
  </body>
</html>
